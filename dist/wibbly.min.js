(function(){!function(){var a,b,c,d,e,f,g,h,i,j,k;for(b="native",c=Date.now||function(){return(new Date).getTime()},e=window.requestAnimationFrame,j=["webkit","moz","o","ms"],h=0,i=j.length;i>h;h++)g=j[h],null==e&&(e=window[""+g+"RequestAnimationFrame"]);return null==e&&(b="timer",a=0,d=f=null,e=function(b){var e,g,h;return null!=d?void d.push(b):(h=c(),g=Math.max(0,33.89-(h-a)),d=[b],a=h+g,e=function(){var b,c,e,f;for(c=d,d=null,e=0,f=c.length;f>e;e++)(b=c[e])(a)},void(f=setTimeout(e,g)))}),e(function(a){var b,d;1e12>a?null!=(null!=(d=window.performance)?d.now:void 0)?(e.now=function(){return window.performance.now()},e.method="native-highres"):(b=c()-a,e.now=function(){return c()-b},e.method="native-highres-noperf"):e.now=c}),e.now=null!=(null!=(k=window.performance)?k.now:void 0)?function(){return window.performance.now()}:c,e.method=b,window.requestAnimationFrame=e}()}).call(this),function(){var a=[].slice;this.Vector=function(){function b(){var b;b=1<=arguments.length?a.call(arguments,0):[],this.values=b,this.values}return b.prototype.clone=function(){return function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(b,this.values,function(){})},b.prototype.reverse=function(){return this.scale(-1)},b.prototype.scale=function(a){var b;return b=this.clone(),b.mutScale(a),b},b.prototype.update=function(){var b;return b=1<=arguments.length?a.call(arguments,0):[],this.values=b,this},b.prototype.setX=function(a){return this.values[0]=a},b.prototype.setY=function(a){return this.values[1]=a},b.prototype.setZ=function(a){return this.values[2]=a},b.prototype.mutScale=function(a){return this.values=this.values.map(function(b){return b*a})},b.prototype.equals=function(a){var b,c,d,e,f;if(a.values.length!==this.values.length)return!1;for(f=this.values,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],a.values[b]!==c)return!1;return!0},b.prototype.x=function(){return this.values.length>0?this.values[0]:null},b.prototype.y=function(){return this.values.length>1?this.values[1]:null},b.prototype.z=function(){return this.values.length>2?this.values[2]:null},b}()}.call(this),function(){this.Dimensions=function(){function a(a,b){this.vector=new Vector(a,b)}return a.FromVector=function(b){return new a(b.x(),b.y())},a.prototype.equals=function(a){return this.vector.equals(a.vector)},a.prototype.scale=function(b){var c;return c=new a(this.vector.x(),this.vector.y()),c.mutableScale(b),c},a.prototype.update=function(a,b){return this.vector.update(a,b)},a.prototype.mutableScale=function(a){return this.vector.mutScale(a)},a.prototype.width=function(){return this.vector.x()},a.prototype.height=function(){return this.vector.y()},a.prototype.scaleToFill=function(b){var c,d,e;return d=b.width()/this.width(),e=b.height()/this.height(),c=d>e?d:e,a.FromVector(this.vector.scale(c))},a.prototype.scaleToFit=function(b){var c,d,e;return d=b.width()/this.width(),e=b.height()/this.height(),c=e>d?d:e,a.FromVector(this.vector.scale(c))},a.prototype.centerOffset=function(a){var b,c;return b=(a.width()-this.width())/2,c=(a.height()-this.height())/2,new Vector(b,c)},a}()}.call(this),function(){null==this.BigSea&&(this.BigSea={}),this.BigSea.Layer=function(){function a(a,b,c,d){this.origin=new Vector(a,b),this.box=new Dimensions(c,d)}var b,c;return c=null,a.Viewport=function(){var a,b,d,e;return null===c&&(c=new BigSea.Layer),b=window.pageXOffset,d=window.pageYOffset,e=Math.max(document.documentElement.clientWidth,window.innerWidth||0),a=Math.max(document.documentElement.clientHeight,window.innerHeight||0),c.update(b,d,e,a)},b=function(a){var b,c;for(b=a.offsetLeft,c=a.offsetTop;a=a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop;return{left:b,top:c}},a.prototype.left=function(){return this.origin.x()},a.prototype.top=function(){return this.origin.y()},a.prototype.width=function(){return this.box.width()},a.prototype.height=function(){return this.box.height()},a.prototype.right=function(){return this.left()+this.width()},a.prototype.bottom=function(){return this.top()+this.height()},a.prototype.is_equal_to=function(a){return this.origin.equals(a.origin)&&this.box.equals(a.box)},a.prototype.is_equivalent_to=function(a){return this.box.equals(a.box)},a.prototype.intersects=function(a){return this.left()<a.right()&&this.top()<a.bottom()&&this.right()>a.left()&&this.bottom()>a.top()},a.prototype.contains=function(a){return this.left()<=a.left()&&this.top()<=a.top()&&this.bottom()>=a.bottom()&&this.right()>=a.right()},a.prototype.update=function(a,b,c,d){return this.origin.update(a,b),this.box.update(c,d),this},a.prototype.updateFromElement=function(a){var c,d;return"function"==typeof a.getBoundingClientRect?(d=a.getBoundingClientRect(),c={x:window.pageXOffset,y:window.pageYOffset},this.update(d.left+c.x,d.top+c.y,d.width,d.height)):(c=b(a),this.update(c.left,c.top,a.offsetWidth,a.offsetHeight)),this},a}()}.call(this),function(){this.ScalableBezier=function(){function a(a,b,c,d,e,f,g,h){this.startX=a,this.startY=b,this.controlX1=c,this.controlY1=d,this.controlX2=e,this.controlY2=f,this.endX=g,this.endY=h}return a.FromAttribute=function(b,c){var d,e;if(e=b.attributes.getNamedItem(c),null===e)return null;if(d=e.value.split(" ").map(parseFloat),d.length<8)throw"bezier requires 8 points";return function(a,b,c){c.prototype=a.prototype;var d=new c,e=a.apply(d,b);return Object(e)===e?e:d}(a,d,function(){})},a.prototype.clone=function(){return new a(this.startX,this.startY,this.controlX1,this.controlY1,this.controlX2,this.controlY2,this.endX,this.endY)},a.prototype.scale=function(a,b){var c;return c=this.clone(),c.mutateScale(a,b),c},a.prototype.mutateScale=function(a,b){return this.startX*=a,this.startY*=b,this.controlX1*=a,this.controlY1*=b,this.controlX2*=a,this.controlY2*=b,this.endX*=a,this.endY*=b},a.prototype.applyToCanvas=function(a,b,c){return null==b&&(b=0),null==c&&(c=0),a.lineTo(b+this.startX,c+this.startY),a.bezierCurveTo(this.controlX1+b,this.controlY1+c,this.controlX2+b,this.controlY2+c,this.endX+b,this.endY+c)},a.prototype.renderPoints=function(a,b,c,d){return null==b&&(b=0),null==c&&(c=0),null==d&&(d="#F00"),a.fillStyle=d,a.fillRect(this.startX+b,this.startY+c,5,5),a.fillRect(this.controlX1+b,this.controlY1+c,5,5),a.fillRect(this.controlX2+b,this.controlY2+c,5,5),a.fillRect(this.endX+b,this.endY+c,5,5)},a.prototype.reverse=function(){var a;return a=this.clone(),a.mutableReverse(),a},a.prototype.mutableReverse=function(){var a;return a=this.startX,this.startX=this.endX,this.endX=a,a=this.startY,this.startY=this.endY,this.endY=a,a=this.controlX1,this.controlX1=this.controlX2,this.controlX2=a,a=this.controlY1,this.controlY1=this.controlY2,this.controlY2=a},a}()}.call(this),function(){null==this.BigSea&&(this.BigSea={}),this.BigSea.BezierMask=function(){function a(a,b){this.top=null!=a?a:null,this.bottom=null!=b?b:null,this.createClipCanvas(),this.lastDims=null}var b;return b=Math.abs,a.fromElementAttributes=function(a){var b,c;return c=ScalableBezier.FromAttribute(a,"data-top"),b=ScalableBezier.FromAttribute(a,"data-bottom"),new BigSea.BezierMask(c,b)},a.prototype.updateCanvasDimensions=function(a){return this.clipCanvas.width=a.width,this.clipCanvas.height=this.totalHeight(a)},a.prototype.createClipCanvas=function(){return this.clipCanvas=document.createElement("canvas"),this.clipCanvas.width=1,this.clipCanvas.height=1,this.clipContext=this.clipCanvas.getContext("2d")},a.prototype.updateClippingCanvas=function(a){return this.updateCanvasDimensions(a),this.clipContext.beginPath(),this.drawTop(a),this.drawBottom(a),this.clipContext.closePath(),this.clipContext.fill()},a.prototype.drawTop=function(a){var c;return null!==this.top?(c=this.top.scale(a.width,b(a.topMargin)),this.clipContext.moveTo(c.startX,c.startY),c.applyToCanvas(this.clipContext)):(this.clipContext.moveTo(0,0),this.clipContext.lineTo(a.width,0))},a.prototype.drawBottom=function(a){var c;return null!==this.bottom?(c=this.bottom.scale(a.width,b(a.bottomMargin)).reverse(),c.applyToCanvas(this.clipContext,0,a.height+b(a.topMargin))):(this.clipContext.lineTo(a.width,this.totalHeight(a)),this.clipContext.lineTo(0,this.totalHeight(a)))},a.prototype.drawClippingShape=function(a,b){var c;return c={w:b.width,h:this.totalHeight(b)},null!==this.lastDims&&this.dimensionsMatch(this.lastDims,c)||this.updateClippingCanvas(b),this.lastDims=c,a.save(),a.globalCompositeOperation="destination-in",a.drawImage(this.clipContext.canvas,0,0,c.w,c.h),a.restore()},a.prototype.dimensionsMatch=function(a,b){return a.w===b.w&&a.h===b.h},a.prototype.totalHeight=function(a){return a.height+b(a.topMargin)+b(a.bottomMargin)},a}()}.call(this),function(){this.BackgroundTransition=function(){function a(a,b){this.background=a,this.duration=b,this.finished=this.duration>0?!1:!0,this.crappySupport()?this.finished=!0:this.start_time=this.getSupportedStartTime()}return a.prototype.process=function(a,b,c,d){return 0===d&&(this.finished=!0),this.background.ready?(b.save(),d>this.start_time+this.duration?(this.finished=!0,b.globalAlpha=1):b.globalAlpha=(d-this.start_time)/this.duration,b.globalCompositeOperation="source-atop",this.background.renderToCanvas(a,b,d),b.restore()):void(this.start_time=d)},a.prototype.getSupportedStartTime=function(){var a;return null!=(null!=(a=window.performance)?a.now:void 0)?performance.now():Date.now()},a.prototype.crappySupport=function(){var a,b,c;return c="function"!=typeof Date.now,a="function"==typeof window.requestAnimationFrame,b=/iPad|iPhone|iPod/.test(navigator.platform),b||c||!a},a}()}.call(this),function(){this.BackgroundStrategy=function(){function a(){this.lastBox=null,this.ready=!1,this.requiresRedrawing=!1,this.callback=null}return a.Factory=function(a){var b,c;if(null==a&&(a="solid #000"),"string"!=typeof a)throw"attribute_string is not a string";if(c=a.split(" "),c.length<2)throw'background attribute format is "type [params...]" with minimum of one parameter.';switch(c[0]){case"solid":return new SolidBackground(c[1]);case"video":try{return new VideoBackground(c[1])}catch(d){if(b=d,"No HTML5 video support detected"===b)return new ImageBackground(c[1]+".jpg");throw b}break;case"image":return 2===c.length?new ImageBackground(c[1]):new ImageBackground(c.slice(1));default:throw'"'+c[0]+'" is not a valid background type'}},a.prototype.getDimensions=function(a){return a instanceof HTMLVideoElement?new Dimensions(a.videoWidth,a.videoHeight):a instanceof HTMLImageElement?new Dimensions(a.naturalWidth,a.naturalHeight):new Dimensions(a.width,a.height)},a.prototype.sourceBox=function(a,b){var c,d;return d=a.scaleToFit(b),c=d.centerOffset(b),{source:{x:Math.floor(c.x()),y:Math.floor(c.y())},dims:{width:Math.floor(d.width()),height:Math.floor(d.height())}}},a.prototype.getRenderBox=function(a,b){var c,d;return null!==this.lastBox&&a.equals(this.lastDims)?c=this.lastBox:(this.lastDims=a,d=this.getDimensions(b),this.lastBox=this.sourceBox(a,d),this.lastBox.source.x<0&&(this.lastBox.source.x=0),this.lastBox.source.y<0&&(this.lastBox.source.y=0),this.lastBox.dims.height>d.height()&&(this.lastBox.dims.height=d.height()),this.lastBox.dims.width>d.width()&&(this.lastBox.dims.width=d.width()),c=this.lastBox),c},a.prototype.renderToCanvas=function(a,b,c){return null==c&&(c=0),null},a.prototype.setCallback=function(a){return null},a}()}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};this.ImageBackground=function(a){function c(a){if(c.__super__.constructor.call(this),this.callback=null,"string"==typeof a)this.image=this.createImage(a);else{if(!("object"==typeof a&&a instanceof Array))throw"url provided to ImageBackground constructor must be string or array";this.image=this.createSrcSetImage(a)}this.fallback=new SolidBackground(d)}var d;return b(c,a),d="#000",c.SetFallbackColor=function(a){return d=a},c.prototype.renderToCanvas=function(a,b,c){var d,e,f;return null==c&&(c=0),this.ready?(e=this.getDimensions(a),d=this.getRenderBox(e,this.imageCanvas),b.drawImage(this.imageContext.canvas,d.source.x,d.source.y,d.dims.width,d.dims.height,0,0,e.vector.values[0],e.vector.values[1])):null!=(f=this.fallback)?f.renderToCanvas(a,b,c):void 0},c.prototype.createSrcSetImage=function(a){var b,c=this;return b=document.createElement("img"),b.addEventListener("load",function(){return c.setReady()}),this.isSrcsetSupported()?b.srcset=a.join(" "):b.src=a[0],b},c.prototype.createImage=function(a){var b,c=this;return b=document.createElement("img"),"undefined"!=typeof console&&null!==console&&console.log("created image for url "+a),b.addEventListener("load",function(){return c.setReady()}),b.src=a,b},c.prototype.createCanvasSource=function(){var a;return a=this.getDimensions(this.image),this.imageCanvas=document.createElement("canvas"),this.imageCanvas.width=a.width(),this.imageCanvas.height=a.height(),this.imageContext=this.imageCanvas.getContext("2d"),this.imageContext.drawImage(this.image,0,0),"undefined"!=typeof console&&null!==console?console.log("created canvas source for image",this):void 0},c.prototype.setReady=function(){return this.createCanvasSource(),this.ready=!0,null!==this.callback?this.callback():void 0},c.prototype.setCallback=function(a){return this.callback=a},c.prototype.isSrcsetSupported=function(){var a;return a=document.createElement("img"),"string"==typeof a.srcset},c}(this.BackgroundStrategy)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};this.SolidBackground=function(a){function c(a){c.__super__.constructor.call(this),this.color=a,this.ready=!0}return b(c,a),c.prototype.renderToCanvas=function(a,b,c){var d;return null==c&&(c=0),d=this.getDimensions(a),b.fillStyle=this.color,b.fillRect(0,0,d.width(),d.height())},c}(this.BackgroundStrategy)}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};this.VideoBackground=function(a){function c(a){if(this.debug=!1,c.__super__.constructor.call(this),this.requiresRedrawing=!0,!this.detectVideoSupport())throw"No HTML5 video support detected";this.fallback=this.createImageBackground(""+a+".jpg"),this.video=this.createVideoElement(a)}return b(c,a),c.prototype.createImageBackground=function(a){var b,c=this;return b=new ImageBackground(a),b.setCallback(function(){return null!==c.callback?c.callback():void 0}),b},c.prototype.createVideoElement=function(a){var b,c=this;return b=document.createElement("video"),b.addEventListener("playing",function(){return c.setReady()}),this.setAttribute(b,"poster",""+a+".jpg"),this.setAttribute(b,"autoplay","autoplay"),this.setAttribute(b,"loop","loop"),b.appendChild(this.createSource(""+a+".webm",'video/webm; codecs="vp8.0, vorbis"')),b.appendChild(this.createSource(""+a+".ogv",'video/ogg; codecs="theora, vorbis"')),b.appendChild(this.createSource(""+a+".mp4",'video/mp4; codecs="avc1.4D401E, mp4a.40.2"')),b},c.prototype.setAttribute=function(a,b,c){var d;return d=document.createAttribute(b),d.value=c,a.attributes.setNamedItem(d)},c.prototype.createSource=function(a,b){var c;return c=document.createElement("source"),this.setAttribute(c,"type",b),this.setAttribute(c,"src",a),c},c.prototype.detectVideoSupport=function(){var a,b,c;return b=document.createElement("video"),a="function"==typeof b.play&&"function"==typeof requestAnimationFrame,c=/iPad|iPhone|iPod/.test(navigator.platform),a&&!c},c.prototype.renderToCanvas=function(a,b,c){var d,e,f;return null==c&&(c=0),this.ready?(e=this.getDimensions(a),d=this.getRenderBox(e,this.video),this.debug&&(console.log(e,d,a,b,this.video),this.debug=!1),b.drawImage(this.video,d.source.x,d.source.y,d.dims.width,d.dims.height,0,0,e.vector.values[0],e.vector.values[1])):null!=(f=this.fallback)?f.renderToCanvas(a,b,c):void 0},c.prototype.setReady=function(){return this.ready=!0,null!==this.callback?this.callback():void 0},c.prototype.setCallback=function(a){return this.callback=a},c}(this.BackgroundStrategy)}.call(this),function(){this.FrameManager=function(){function a(){this.frameid=0,this.nextFrame=null,this.debug=!1}return a.prototype.queueFrame=function(a){return this.nextFrame=a,this.frameid=Math.random()},a.prototype.frame=function(){var a;return a=this.nextFrame,this.debug&&console.log(this.frameid),null!==a?a():void 0},a}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};null==this.BigSea&&(this.BigSea={}),this.BigSea.AnimationManager=function(){function b(){this.frame=a(this.frame,this),this.onResizeEvent=a(this.onResizeEvent,this),this.wibblyElementList=[],this.resize_flagged=!0,this.running=!1,this.raf_confirmed=!1,window.addEventListener("resize",this.onResizeEvent)}return b.prototype.onResizeEvent=function(){return this.resize_flagged=!0,this.raf_confirmed?void 0:(this.resizeAll(),this.redraw(0,!0))},b.prototype.register=function(a){return this.wibblyElementList.push(a),this.running?void 0:(this.running=!0,requestAnimationFrame(this.frame))},b.prototype.frame=function(a){return null==a&&(a=0),this.raf_confirmed=!0,this.running=!0,requestAnimationFrame(this.frame),this.needsResize()?(this.resizeAll(),this.redraw(a,!0)):this.redraw(a)},b.prototype.redraw=function(a,b){var c,d,e,f,g;for(null==b&&(b=!1),f=this.wibblyElementList,g=[],d=0,e=f.length;e>d;d++)c=f[d],b||c.needsAnimation()?g.push(c.draw(a)):g.push(void 0);return g},b.prototype.needsResize=function(){return this.resize_flagged?(this.resize_flagged=!1,!0):!1},b.prototype.resizeAll=function(){var a,b,c,d,e;for(d=this.wibblyElementList,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.resize());return e},b}()}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};this.WibblyElement=function(){function b(c){var d;this.element=c,this.draw=a(this.draw,this),this.transitions=[],this.compositeSupported=this.isCompositeSupported(),null==(d=this.element.style).position&&(d.position="relative"),this.bezierMask=BigSea.BezierMask.fromElementAttributes(this.element),this.loadBackground(this.element),this.createCanvas(),this.removeLoadingClass(this.element),b.AnimationManager.register(this)}return b.AnimationManager=new BigSea.AnimationManager,b.prototype.removeLoadingClass=function(a){return a.className=a.className.replace(/\bwib-loading\b/,"")},b.prototype.isCompositeSupported=function(){var a,b;return b=document.createElement("canvas"),a=b.getContext("2d"),a.globalCompositeOperation="destination-in","destination-in"===a.globalCompositeOperation},b.prototype.loadBackground=function(a){var b,c=this;if(b=a.attributes.getNamedItem("data-background"),null===b)throw"missing required data-background attribute";return this.background=BackgroundStrategy.Factory(b.value),this.background.setCallback(function(){return c.redraw_needed=!0})},b.prototype.createCanvas=function(){return this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left=0,this.canvas.style.top=0,this.canvas.style.zIndex=-1,this.context=this.canvas.getContext("2d"),this.context.globalCompositeOperation="source-over",this.context.save(),this.element.appendChild(this.canvas)},b.prototype.getElementDimensions=function(a){var b,c;return c=a.currentStyle||window.getComputedStyle(a),b={width:Math.ceil(a.offsetWidth),height:Math.ceil(a.offsetHeight),topMargin:Math.ceil(parseFloat(c.marginTop)),bottomMargin:Math.ceil(parseFloat(c.marginBottom))},isNaN(b.topMargin)&&(b.topMargin=0),isNaN(b.bottomMargin)&&(b.bottomMargin=0),b.totalHeight=b.height+Math.abs(b.topMargin)+Math.abs(b.bottomMargin),b},b.prototype.resize=function(){var a,b,c;return a=this.getElementDimensions(this.element),this.canvas.style.top=""+a.topMargin+"px",b=document.createElement("canvas"),b.width=a.width,b.height=a.totalHeight,c=b.getContext("2d"),c.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,a.width,a.totalHeight),this.canvas.width=a.width,this.canvas.height=a.totalHeight,this.canvas.style.width=""+a.width+"px",this.canvas.style.height=""+a.totalHeight+"px",this.context.drawImage(c.canvas,0,0,b.width,b.height,0,0,this.canvas.width,this.canvas.height)},b.prototype.needsAnimation=function(){return this.redraw_needed?!0:this.background.requiresRedrawing?!0:this.transitions.length>0?!0:!1},b.prototype.draw=function(a){var b;return null==a&&(a=0),this.redraw_needed=!1,b=this.getElementDimensions(this.element),this.drawing=!0,this.background.renderToCanvas(this.canvas,this.context,a),this.compositeSupported&&this.bezierMask.drawClippingShape(this.context,b),this.processTransitions(b,a),this.drawing=!1},b.prototype.processTransitions=function(a,b){var c,d,e,f,g;if(0!==this.transitions.length&&0!==b){for(g=this.transitions,e=0,f=g.length;f>e;e++)d=g[e],d.process(this.canvas,this.context,a,b);for(c=this.background.requiresRedrawing;;){if(0===this.transitions.length)break;if(!this.transitions[this.transitions.length-1].finished)break;this.background=this.transitions.pop().background}return!c&&this.background.requiresRedrawing?this.redraw_needed=!0:void 0}},b.prototype.changeBackground=function(a,b){var c,d,e;null==b&&(b=0);try{d=BackgroundStrategy.Factory(a)}catch(f){return c=f,void console.log(c)}return 0===b?this.background=d:(e=new BackgroundTransition(d,b),this.transitions.unshift(e)),this.redraw_needed=!0},b}()}.call(this);